@page "/"
@rendermode InteractiveServer
@inject IHttpClientFactory HttpClientFactory

<h3>Durable Workflow Test</h3>

<input @bind="userInput" placeholder="Type something..." />
<button @onclick="StartWorkflow">Start Workflow</button>

<p><b>Status:</b> @status</p>

@code {
    string userInput = "";
    string status = "Idle";

    async Task StartWorkflow()
    {
        try
        {
            status = "Calling Durable backend...";

            var client = HttpClientFactory.CreateClient("durable");
            var response =
                await client.GetStringAsync($"/api/start/{userInput}");

            status = $"Started successfully: {response}";
        }
        catch (Exception ex)
        {
            status = $"ERROR: {ex.Message}";
        }
    }
}
